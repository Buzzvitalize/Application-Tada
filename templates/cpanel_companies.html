{% extends 'base.html' %}
{% block content %}
<h1 class="text-xl mb-4">Empresas</h1>

<form method="get" class="mb-4 flex gap-2">
  <input name="q" value="{{ q }}" placeholder="Buscar" class="border p-1 rounded flex-1">
  <button class="bg-blue-600 text-white px-3 rounded">Buscar</button>
</form>

<table class="min-w-full bg-white">
  <thead><tr class="bg-gray-100"><th class="p-2 text-left">Nombre</th><th></th></tr></thead>
  <tbody>
  {% for c in companies.items %}
  <tr class="border-t">
    <td class="p-2">{{ c.name }}</td>
    <td class="p-2 text-right">
      <form method="post" action="{{ url_for('cpanel_company_delete', cid=c.id) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button class="text-red-600" onclick="return confirm('Eliminar?')">Eliminar</button>
      </form>
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>

<div class="mt-4 flex items-center gap-2">
  {% if companies.has_prev %}
    <a href="?page={{ companies.prev_num }}&q={{ q }}" class="px-2 py-1 bg-gray-200 rounded">Anterior</a>
  {% endif %}
  <span>PÃ¡gina {{ companies.page }} de {{ companies.pages }}</span>
  {% if companies.has_next %}
    <a href="?page={{ companies.next_num }}&q={{ q }}" class="px-2 py-1 bg-gray-200 rounded">Siguiente</a>
  {% endif %}
</div>
{% endblock %}
